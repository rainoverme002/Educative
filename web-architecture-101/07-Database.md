# Database

- A component required to persist data.
- Forms of data:
  - structured (integer, string),
  - unstructured (text, image files, video),
  - semi-structured (XML or JSON) and
  - user state data

## Relational Database

- Containing relationships:
  - One to One,
  - One to Many,
  - Many to Many,
  - Many to One

- Data is consistent
- ACID transactions: a transaction will not affect the others

## NoSQL Database

- For high frequency read & writes
- Easy to scale
- Intelligent clustering
- The consistency is not as strong as Relational Database

- When to pick it?
  - Handling A Large Number Of Read Write Operations
  - Flexibility With Data Modeling
  - Eventual Consistency  Over Strong Consistency
    - Eventual consistency: No lock mechanism when update across nodes
    - Strong Consistency: There is a lock mechanism
  - Running Data Analytics

- Pros of NoSQL:
  - Easy to learn
  - Schemaless
  - No stress of managing joins, relationships, N+1 query issues

- Cons of NoSQL:
  - Inconsistency
  - No support for ACID transactions

## SQL vs NoSQL

- [Quora story on why are they still using MySQL](https://www.quora.com/Why-does-Quora-use-MySQL-as-the-data-store-instead-of-NoSQLs-such-as-Cassandra-MongoDB-or-CouchDB-Are-they-doing-any-JOINs-over-MySQL-Are-there-plans-to-switch-to-another-DB)

- [Facebook story](https://www.8bitmen.com/what-database-does-facebook-use-a-1000-feet-deep-dive/)

## Polyglot Persistence

- It will maximize every technology potential
- But, it will add complexity of the system

Real use cases from social media app:

- Relational Database:
  - store relationships
    - like persisting friends of a user
- Key-value store:
  - For low latency access of all the frequently accessed data
- Wide Column Database:
  - To understand user behaviour
    - we need to set up an analytics system to run analytics on the data generated by the users
- ACID Transactions & Strong Consistency:
  - we need to set up a payments system
- Graph Database
  - implement a recommendation system
- Document Oriented Store
  - a scalable search feature

## Multi-Model Databases

- use different data models in a single database system.
- support multiple data models like Graph, Document-Oriented, Relational etc

## CAP Theorem

    CAP theorem simply states that in case of a network failure, when a few of the nodes of the system are down, we have to make a choice between Availability & Consistency

## Types of Database

- Document oriented
  - Case studies: [SEGA](https://www.mongodb.com/blog/post/sega-hardlight-migrates-to-mongodb-atlas-simplify-ops-improve-experience-mobile-gamers), [Coinbase](https://www.mongodb.com/customers/coinbase)
  - Examples:
    - Real-time feeds
    - Live sports apps
    - Writing product catalogues
    - Inventory management
    - Storing user comments
    - Web-based multiplayer games
- Graph Database
  - store data in nodes/vertices and edges in the form of relationships.
  - great visualization
  - low latency
  - Case studies: [Walmart](https://neo4j.com/case-studies/), [NASA](https://neo4j.com/blog/david-meza-chief-knowledge-architect-nasa/)
  - Examples:
    - Google Maps
    - Building social, knowledge, network graphs.
    - Writing AI-based apps,
    - Recommendation engines,
    - Fraud analysis app,
    - Storing genetic data
- Key value database
  - Case studies: [Microsoft](https://redislabs.com/docs/microsoft-relies-redis-labs/), [Google](https://cloud.google.com/appengine/docs/standard/python/memcache/), [Inovonics](https://redislabs.com/case-studies/inovonics/)
  - Examples:
    - Caching
    - Persisting user state
    - Persisting user sessions
    - Managing real-time data
    - Implementing queues
    - Creating leaderboards in online games & web apps
    - Implementing a pub-sub system
- Timeseries
  - Containing data points associated with the occurrence of an event with respect to time
  - Case studies: [IBM](https://www.influxdata.com/customer/ibm/), [Spiio](https://www.influxdata.com/customer/customer_case_study_spiio/)
  - Examples:
    - an autonomous trading platform
    - fetching data from IoT devices
- Wide column
  - used to handle massive amounts of data, technically called the Big Data.
  - Case studies: [Netflix](https://netflixtechblog.com/tagged/cassandra?gi=c999f08bb159),[Apache HBase](https://hbase.apache.org/poweredbyhbase.html)
  - Examples:
    - Big data ensuring scalability, performance & high availability at the same time.
